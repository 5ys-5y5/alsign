# ğŸ“‹ AlSign ì´ìŠˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

> **ëª©ì **: ì„œë¹„ìŠ¤ì˜ ëª¨ë“  ì´ìŠˆë“¤ì˜ ë°˜ì˜ ìƒíƒœë¥¼ í•œëˆˆì— íŒŒì•…
>
> **ë²”ë¡€**: âœ… ë°˜ì˜ì™„ë£Œ | ğŸ”„ ë¶€ë¶„ë°˜ì˜ | âŒ ë¯¸ë°˜ì˜ | â¸ï¸ ë³´ë¥˜
>
> **ë¬¸ì„œ ì—°ê²°**: ì²´í¬ë¦¬ìŠ¤íŠ¸(ì—¬ê¸°) â†’ `2_FLOW.md` (íë¦„ë„) â†’ `3_DETAIL.md` (ìƒì„¸ë„)
>
> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-05 KST (I-43 ì„¤ê³„ ì™„ë£Œ - Dashboard Events ë¡œë”© ì„±ëŠ¥ ê°œì„ , txn_price_trend í…Œì´ë¸” ë¶„ë¦¬)

---

## ğŸ“Š ì „ì²´ ìš”ì•½ í…Œì´ë¸”

| ID | ì´ìŠˆëª… | ìƒíƒœ | ë°œê²¬ì¼ | í•´ê²°ì¼ | DB | íë¦„ë„ | ìƒì„¸ë„ |
|----|--------|------|--------|--------|-----|--------|--------|
| I-01 | consensusSignal ì„¤ì • ë¶ˆì¼ì¹˜ | âœ… | 2025-12-23 | 2025-12-24 | âœ… | #I-01 | #I-01 |
| I-02 | priceEodOHLC dict response_key | âœ… | 2025-12-23 | 2025-12-23 | N/A | #I-02 | #I-02 |
| I-03 | targetMedian & consensusSummary | âœ… | 2025-12-23 | 2025-12-23 | N/A | #I-03 | #I-03 |
| I-04 | ì§§ì€ ì´ë¦„ ë©”íŠ¸ë¦­ | â¸ï¸ | 2025-12-23 | - | N/A | #I-04 | - |
| I-05 | consensus ë©”íŠ¸ë¦­ ì¶”ê°€ | âœ… | 2025-12-23 | 2025-12-24 | âœ… | #I-05 | #I-05 |
| I-06 | consensusWithPrev | âœ… | 2025-12-23 | 2025-12-24 | N/A | #I-06 | - |
| I-07 | source_id íŒŒë¼ë¯¸í„° ëˆ„ë½ | âœ… | 2025-12-23 | 2025-12-23 | N/A | #I-07 | #I-07 |
| I-08 | ì‹œê°„ì  ìœ íš¨ì„± ë¬¸ì œ | âœ… | 2025-12-23 | 2025-12-23 | N/A | #I-08 | #I-08 |
| I-09 | Topological Sort ìˆœì„œ ì˜¤ë¥˜ | âœ… | 2025-12-23 | 2025-12-23 | N/A | #I-09 | #I-09 |
| I-10 | priceEodOHLC_dateRange ì •ì±… | âœ… | 2025-12-24 | 2025-12-24 | âœ… | #I-10 | #I-10 |
| I-11 | internal(qual) ë©”íŠ¸ë¦­ ë™ì  | âœ… | 2025-12-24 | 2025-12-24 | âœ… | #I-11 | #I-11 |
| I-12 | ë™ì  ê³„ì‚° ì½”ë“œ syntax ì˜¤ë¥˜ | âœ… | 2025-12-24 | 2025-12-24 | âœ… | #I-12 | #I-12 |
| I-13 | priceEodOHLC API íŒŒë¼ë¯¸í„° ëˆ„ë½ | âœ… | 2025-12-24 | 2025-12-24 | N/A | #I-13 | #I-13 |
| I-14 | aftermarket API 401 ì˜¤ë¥˜ | â¸ï¸ | 2025-12-24 | - | N/A | #I-14 | #I-14 |
| I-15 | event_date_obj ë³€ìˆ˜ ìˆœì„œ ì˜¤ë¥˜ | âœ… | 2025-12-24 | 2025-12-24 | N/A | #I-15 | #I-15 |
| I-16 | ë©”íŠ¸ë¦­ ì‹¤íŒ¨ ë””ë²„ê¹… ë¡œê·¸ ë¶€ì¬ | âœ… | 2025-12-24 | 2025-12-24 | N/A | #I-16 | #I-16 |
| I-17 | ë¡œê·¸ í˜•ì‹ N/A ê³¼ë‹¤ ì¶œë ¥ | âœ… | 2025-12-24 | 2025-12-24 | N/A | #I-17 | #I-17 |
| I-18 | priceEodOHLC Schema Array Type | âœ… | 2025-12-25 | 2025-12-25 | âœ… | #I-18 | #I-18 |
| I-19 | ë©”íŠ¸ë¦­ ë¡œê·¸ Truncation ë¬¸ì œ | âœ… | 2025-12-25 | 2025-12-25 | N/A | #I-19 | #I-19 |
| I-20 | backfillEventsTable ì„±ëŠ¥ ê°œì„  | âœ… | 2025-12-25 | 2025-12-25 | N/A | #I-20 | #I-20 |
| I-21 | priceEodOHLC domain ì„¤ì • ì˜¤ë¥˜ | âœ… | 2025-12-25 | 2025-12-25 | âœ… | #I-21 | #I-21 |
| I-22 | SQL ì˜ˆì•½ì–´ "position" ë¬¸ì œ | âœ… | 2025-12-25 | 2025-12-25 | N/A | #I-22 | #I-22 |
| I-23 | NULL ê°’ ë””ë²„ê¹… ë¡œê·¸ ê°œì„  | âœ… | 2025-12-25 | 2025-12-25 | N/A | #I-23 | #I-23 |
| I-24 | price trends ì²˜ë¦¬ ì„±ëŠ¥ ìµœì í™” | âœ… | 2025-12-25 | 2025-12-25 | N/A | #I-24 | #I-24 |
| I-25 | APIë³„ ê¸°ì¤€ ë‚ ì§œ ë¶ˆì¼ì¹˜ (marketCap) | âœ… | 2025-12-27 | 2025-12-27 | âœ… | #I-25 | #I-25 |
| I-26 | consensus_summary_cache event_date ë¬´ì‹œ | âœ… | 2025-12-27 | 2025-12-27 | N/A | #I-26 | #I-26 |
| I-27 | priceTrend í‹°ì»¤ë³„ 1íšŒ í˜¸ì¶œ í™•ì¸ | âœ… | 2025-12-27 | 2025-12-27 | N/A | #I-27 | #I-27 |
| I-28 | ì¬ë¬´ì œí‘œ TTM ê³„ì‚° ì‹œê°„ì  ìœ íš¨ì„± | âœ… | 2025-12-27 | 2025-12-27 | N/A | #I-28 | #I-28 |
| I-29 | evt_consensus 2ë‹¨ê³„ ê³„ì‚° ë¯¸ì‹¤í–‰ | âœ… | 2025-12-30 | 2025-12-31 | N/A | #I-29 | #I-29 |
| I-30 | ë©”íŠ¸ë¦­ë³„ ì›ì²œ ë‚ ì§œ ì¶”ì  (_meta.sources) | âœ… | 2025-12-30 | 2025-12-31 | N/A | #I-30 | #I-30 |
| I-31 | targetSummary ê³„ì‚° (consensusSummary ëŒ€ì²´) | âœ… | 2025-12-31 | 2025-12-31 | âœ… | #I-31 | #I-31 |
| I-32 | Log íŒ¨ë„ ë¦¬ì‚¬ì´ì¦ˆ ê¸°ëŠ¥ | âœ… | 2025-12-31 | 2025-12-31 | N/A | #I-32 | #I-32 |
| I-33 | ë³¸ë¬¸ 80% ë„ˆë¹„ ë° ê°€ìš´ë° ì •ë ¬ | âœ… | 2025-12-31 | 2025-12-31 | N/A | #I-33 | #I-33 |
| I-34 | /setRequests API ë³€ê²½ ê¸°ëŠ¥ (Schema ê²€ì¦) | âœ… | 2025-12-31 | 2025-12-31 | N/A | #I-34 | #I-34 |
| I-35 | GET /sourceData ë³‘ë ¬ ì²˜ë¦¬ ì„±ëŠ¥ ê°œì„  | âœ… | 2025-12-31 | 2025-12-31 | N/A | #I-35 | #I-35 |
| I-36 | Quantitative Position/Disparity í•­ìƒ None | ğŸ”„ DEPRECATED | 2025-12-31 | 2025-12-31 | I-41ë¡œ ëŒ€ì²´ | #I-36 | #I-36 |
| I-37 | targetMedian ëª…ì¹­/ê°’ ë¶ˆì¼ì¹˜ (í‰ê·  vs ì¤‘ì•™ê°’) | âœ… | 2025-12-31 | 2025-12-31 | N/A | #I-37 | #I-37 |
| I-38 | calcFairValue ê¸°ë³¸ê°’ Falseë¡œ ì¸í•œ NULL | ğŸ”„ DEPRECATED | 2026-01-01 | 2026-01-01 | I-41ë¡œ ëŒ€ì²´ | #I-38 | #I-38 |
| I-39 | target_summary JSONB ë¬¸ìì—´ íŒŒì‹± ì˜¤ë¥˜ | âœ… | 2026-01-02 | 2026-01-02 | N/A | #I-39 | #I-39 |
| I-40 | Peer tickers ë¯¸ì¡´ì¬ ì‹œ ë¡œê¹… ë¶€ì¡± | ğŸ”„ DEPRECATED | 2026-01-02 | 2026-01-02 | I-41ë¡œ í†µí•© | #I-40 | #I-40 |
| I-41 | priceQuantitative ë©”íŠ¸ë¦­ ë¯¸êµ¬í˜„ (ì„¤ê³„ ë¶ˆì¼ì¹˜) | âœ… | 2026-01-02 | 2026-01-02 | N/A | #I-41 | #I-41 |
| I-42 | fmp-stock-peers schema mapping + DB ì €ì¥ ì‹¤íŒ¨ | âœ… | 2026-01-02 | 2026-01-02 | N/A | #I-42 | #I-42 |
| I-43 | Dashboard Events í‘œ ë¡œë”© ì„±ëŠ¥ ê°œì„  | ğŸ”„ | 2026-01-05 | - | âœ… | #I-43 | #I-43 |

---

## 1. Config & ë©”íŠ¸ë¦­ ì„¤ì • ì´ìŠˆ (I-01 ~ I-06)

### I-01: consensusSignal ì„¤ì • ë¶ˆì¼ì¹˜ âœ…
	ë°œê²¬: 2025-12-23 | í•´ê²°: 2025-12-24
	- âœ… expressionì„ NULLë¡œ ë³€ê²½ (DB)
	- âœ… aggregation ë°©ì‹ìœ¼ë¡œ ë³€ê²½ (DB)
	- âœ… aggregation_kind = 'leadPairFromList' (DB)
	- âœ… _lead_pair_from_list() ë©”ì„œë“œ êµ¬í˜„ (Python)
	- â¸ï¸ db_field source íƒ€ì… êµ¬í˜„ (ì„ íƒ, ë¶ˆí•„ìš”)
	- â¸ï¸ consensusRaw ë©”íŠ¸ë¦­ ì¶”ê°€ (ì„ íƒ, ë¶ˆí•„ìš”)

### I-02: priceEodOHLC dict response_key âœ…
	ë°œê²¬: 2025-12-23 | í•´ê²°: 2025-12-23
	- âœ… dict response_key ì§€ì› í™•ì¸ (ì´ë¯¸ êµ¬í˜„ë¨)
	- âœ… ì¡°ì¹˜ ë¶ˆí•„ìš” í™•ì¸

### I-03: targetMedian & consensusSummary êµ¬í˜„ âœ…
	ë°œê²¬: 2025-12-23 | í•´ê²°: 2025-12-23
	- âœ… calculate_qualitative_metrics() ìˆ˜ì •
	- âœ… MetricCalculationEngine ì‚¬ìš©
	- âœ… value_qualitativeì— ì„¸ í•­ëª© í¬í•¨

### I-04: ì§§ì€ ì´ë¦„ ë©”íŠ¸ë¦­ â¸ï¸
	ë°œê²¬: 2025-12-23 | ë³´ë¥˜
	- â¸ï¸ ì¡°ì¹˜ ë³´ë¥˜ (í˜„ì¬ ê¸´ ì´ë¦„ìœ¼ë¡œ ì •ìƒ ì‘ë™)

### I-05: consensus ë©”íŠ¸ë¦­ ì¶”ê°€ âœ…
	ë°œê²¬: 2025-12-23 | í•´ê²°: 2025-12-24
	- âœ… SQL ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ë° ì‹¤í–‰ì™„ë£Œ (DB)
	- âœ… fmp-price-target API ì„¤ì • (DB)
	- âœ… response_key 12ê°œ í•„ë“œ ë§¤í•‘ (DB)

### I-06: consensusWithPrev âœ…
	ë°œê²¬: 2025-12-23 | í•´ê²°: 2025-12-24
	- âœ… ì¡°ì¹˜ ë¶ˆí•„ìš” (I-01ì˜ ê°œì„ ì•ˆìœ¼ë¡œ í•´ê²°)

---

## 2. ì½”ë“œ í’ˆì§ˆ ì´ìŠˆ (I-07 ~ I-09)

### I-07: source_id íŒŒë¼ë¯¸í„° ëˆ„ë½ âœ…
	ë°œê²¬: 2025-12-23 | í•´ê²°: 2025-12-23
	- âœ… calculate_qualitative_metrics()ì— source_id ì¶”ê°€
	- âœ… select_consensus_data()ì— source_id ì¶”ê°€
	- âœ… ì •í™•í•œ evt_consensus í–‰ ì¡°íšŒ

### I-08: ì‹œê°„ì  ìœ íš¨ì„± (Temporal Validity) âœ…
	ë°œê²¬: 2025-12-23 | í•´ê²°: 2025-12-23
	- âœ… limit=100ìœ¼ë¡œ ì¶©ë¶„í•œ ê³¼ê±° ë°ì´í„° ì¡°íšŒ
	- âœ… event_date ê¸°ì¤€ í•„í„°ë§ êµ¬í˜„
	- âœ… _meta ì •ë³´ ê¸°ë¡

### I-09: Topological Sort ìˆœì„œ ì˜¤ë¥˜ âœ…
	ë°œê²¬: 2025-12-23 | í•´ê²°: 2025-12-23
	- âœ… in-degree ê³„ì‚° ë¡œì§ ìˆ˜ì •
	- âœ… ì—­ë°©í–¥ ê·¸ë˜í”„ êµ¬ì¶•
	- âœ… api_field ë¨¼ì € ê³„ì‚°ë˜ë„ë¡ ìˆ˜ì •

---

## 3. ë™ì  ì„¤ì • í•­ëª© (I-10 ~ I-11)

### I-10: priceEodOHLC_dateRange ì •ì±… âœ…
	ë°œê²¬: 2025-12-24 | í•´ê²°: 2025-12-24
	- âœ… ë³„ë„ ì •ì±… ì¶”ê°€ (DB)
	- âœ… get_ohlc_date_range_policy() êµ¬í˜„
	- âœ… valuation_service.pyì—ì„œ ì •ì±… í˜¸ì¶œ

### I-11: internal(qual) ë©”íŠ¸ë¦­ ë™ì  ì‚¬ìš© âœ…
	ë°œê²¬: 2025-12-24 | í•´ê²°: 2025-12-24
	- âœ… select_internal_qual_metrics() êµ¬í˜„
	- âœ… calculate_statistics_from_db_metrics() êµ¬í˜„
	- âœ… 7ê°œ internal(qual) ë©”íŠ¸ë¦­ ì¡´ì¬ (DB)

---

## 4. ëŸ°íƒ€ì„ ì´ìŠˆ - 2025-12-24 (I-12 ~ I-17)

### I-12: ë™ì  ê³„ì‚° ì½”ë“œ ì‹¤í–‰ ì‹¤íŒ¨ âœ…
	ë°œê²¬: 2025-12-24 09:00 | í•´ê²°: 2025-12-24 10:30
	- âœ… calculation ì½”ë“œë¥¼ single expressionìœ¼ë¡œ ì¬ì‘ì„±
	- âœ… avgFromQuarter, ttmFromQuarterSumOrScaled ë“± ìˆ˜ì •
	- âœ… SQL ìŠ¤í¬ë¦½íŠ¸: fix_calculation_single_expression.sql

### I-13: priceEodOHLC ë°ì´í„° ì¶”ì¶œ ì‹¤íŒ¨ âœ…
	ë°œê²¬: 2025-12-24 09:00 | í•´ê²°: 2025-12-24 14:00
	- âœ… ì›ì¸: API í˜¸ì¶œ ì‹œ fromDate, toDate íŒŒë¼ë¯¸í„° ëˆ„ë½
	- âœ… valuation_service.py ìˆ˜ì • (íŒŒë¼ë¯¸í„° ì¶”ê°€)
	- âœ… ì „ì²´ ì„œë¹„ìŠ¤ API í˜¸ì¶œ ì ê²€ ì™„ë£Œ

### I-14: fmp-aftermarket-trade API 401 ì˜¤ë¥˜ â¸ï¸
	ë°œê²¬: 2025-12-24 09:00 | ë³´ë¥˜
	- â¸ï¸ FMP ì„œë¹„ìŠ¤ì˜ ì¼ì‹œì  ë¬¸ì œë¡œ íŒë‹¨
	- â¸ï¸ priceAfter ë©”íŠ¸ë¦­ë§Œ ì˜í–¥ (ë‹¤ë¥¸ ë©”íŠ¸ë¦­ ì •ìƒ)

### I-15: event_date_obj ë³€ìˆ˜ ìˆœì„œ ì˜¤ë¥˜ âœ…
	ë°œê²¬: 2025-12-24 15:00 | í•´ê²°: 2025-12-24 15:30
	- âœ… event_date_obj ë³€í™˜ ë¡œì§ì„ API í˜¸ì¶œ ì „ìœ¼ë¡œ ì´ë™
	- âœ… valuation_service.py:425-438 ìˆ˜ì •

### I-16: ë©”íŠ¸ë¦­ ì‹¤íŒ¨ ë””ë²„ê¹… ë¡œê·¸ ë¶€ì¬ âœ…
	ë°œê²¬: 2025-12-24 16:00 | í•´ê²°: 2025-12-24 17:00
	- âœ… _calculate_metric_with_reason() ë©”ì„œë“œ ì¶”ê°€
	- âœ… ì‹¤íŒ¨ ì´ìœ  ë¶„ë¥˜ (api_field, aggregation, expression)

### I-17: ë¡œê·¸ í˜•ì‹ N/A ê³¼ë‹¤ ì¶œë ¥ âœ…
	ë°œê²¬: 2025-12-24 17:00 | í•´ê²°: 2025-12-24 18:00
	- âœ… êµ¬ì¡°í™”ëœ ë°ì´í„° ì—†ìœ¼ë©´ ë‹¨ìˆœ í¬ë§· ì‚¬ìš©
	- âœ… LOGGING_GUIDE.md ë¬¸ì„œ ì‘ì„±

---

## 5. ëŸ°íƒ€ì„ ì´ìŠˆ - 2025-12-25 (I-18 ~ I-20)

### I-18: priceEodOHLC Schema Array Type ë¬¸ì œ âœ…
	ë°œê²¬: 2025-12-25 10:00 | í•´ê²°: 2025-12-25 11:30
	- âœ… ì—ëŸ¬: unhashable type: 'list'
	- âœ… ì›ì¸: config_lv1_api_list.schemaê°€ [{}] (array)ë¡œ ì €ì¥
	- âœ… schemaë¥¼ {} (object) íƒ€ì…ìœ¼ë¡œ ë³€ê²½
	- âœ… SQL ìŠ¤í¬ë¦½íŠ¸: fix_priceEodOHLC_array_types.sql
	- âœ… ì „ì²´ API ìŠ¤í‚¤ë§ˆ ê²€ì¦: verify_all_api_schemas.sql

### I-19: ë©”íŠ¸ë¦­ ë¡œê·¸ Truncation ë¬¸ì œ âœ…
	ë°œê²¬: 2025-12-25 12:00 | í•´ê²°: 2025-12-25 13:00
	- âœ… priceEodOHLC ê°’ì´ 50ìë¡œ ì˜ë¦¼
	- âœ… ìŠ¤ë§ˆíŠ¸ í¬ë§·íŒ… êµ¬í˜„: ë¦¬ìŠ¤íŠ¸ëŠ” ì²« í•­ëª© + ê°œìˆ˜ í‘œì‹œ
	- âœ… 150ì ì œí•œ (ì´ì „ 50ì â†’ 150ì)
	- âœ… ë¶ˆí•„ìš”í•œ ë””ë²„ê·¸ ë¡œê·¸ ì œê±°

### I-20: POST /backfillEventsTable ì„±ëŠ¥ ê°œì„  âœ…
	ë°œê²¬: 2025-12-25 14:00 | í•´ê²°: 2025-12-25 18:00
	- âœ… Ticker ê·¸ë£¹í™” í•¨ìˆ˜ êµ¬í˜„ (group_events_by_ticker)
	- âœ… Ticker ë°°ì¹˜ ì²˜ë¦¬ í•¨ìˆ˜ êµ¬í˜„ (process_ticker_batch)
	- âœ… DB ë°°ì¹˜ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ êµ¬í˜„ (batch_update_event_valuations)
	- âœ… ë³‘ë ¬ ì²˜ë¦¬ ë¡œì§ êµ¬í˜„ (asyncio.Semaphore)
	- âœ… ë™ì‹œì„± ì œì–´ (TICKER_CONCURRENCY = 10)

	**ì„±ëŠ¥ ê°œì„  íš¨ê³¼**:
	| í•­ëª© | Before | After | ê°œì„ ìœ¨ |
	|------|--------|-------|--------|
	| API í˜¸ì¶œ | 136,954 | ~5,000 | 96% â†“ |
	| DB ì¿¼ë¦¬ | 136,954 | ~5,000 | 96% â†“ |
	| ì†Œìš” ì‹œê°„ | 76ì‹œê°„ | 0.5-1ì‹œê°„ | **99% â†“** |

### I-21: priceEodOHLC domain ì„¤ì • ì˜¤ë¥˜ âœ…
	ë°œê²¬: 2025-12-25 19:00 | í•´ê²°: 2025-12-25 19:30
	- âœ… ì›ì¸: priceEodOHLC domainì´ 'quantitative-momentum'ìœ¼ë¡œ ì˜ëª» ì„¤ì •ë¨
	- âœ… ë¬¸ì œ: momentum ë„ë©”ì¸ì— priceEodOHLCê°€ í¬í•¨ë˜ì–´ ë¶ˆí•„ìš”í•œ ê°’ ì¶œë ¥
	- âœ… í•´ê²°: domainì„ 'internal'ë¡œ ë³µì› (SQL ìŠ¤í¬ë¦½íŠ¸)
	- âœ… fix_priceeodohlc_domain.py ì‚­ì œ (ì˜ëª»ëœ ë³€ê²½ ìŠ¤í¬ë¦½íŠ¸)

### I-22: SQL ì˜ˆì•½ì–´ "position" ë¬¸ì œ âœ…
	ë°œê²¬: 2025-12-25 19:30 | í•´ê²°: 2025-12-25 19:45
	- âœ… ì—ëŸ¬: syntax error at or near "position"
	- âœ… ì›ì¸: ::position ìºìŠ¤íŒ…ì—ì„œ positionì€ PostgreSQL ì˜ˆì•½ì–´
	- âœ… í•´ê²°: ::"position" ìœ¼ë¡œ ë”°ì˜´í‘œ ì¶”ê°€

### I-23: NULL ê°’ ë””ë²„ê¹… ë¡œê·¸ ê°œì„  âœ…
	ë°œê²¬: 2025-12-25 20:00 | í•´ê²°: 2025-12-25 20:30
	- âœ… ë¬¸ì œ: NULL ê°’ ì›ì¸ì„ êµ¬ë³„í•  ìˆ˜ ì—†ìŒ (API ë°ì´í„° ë¶€ì¬ vs ê³„ì‚° ì˜¤ë¥˜)
	- âœ… í•´ê²°: INFO ë ˆë²¨ë¡œ NULL ì›ì¸ ë¡œê·¸ ì¶œë ¥
	- âœ… ì¶œë ¥ í˜•ì‹: `[MetricEngine] âœ— NULL: PER | domain=valuation | reason=Missing deps: netIncomeTTM(=None)`
	- âœ… expression ë©”íŠ¸ë¦­ì˜ ì˜ì¡´ì„± ì¶”ì  ê°œì„ 

### I-24: price trends ì²˜ë¦¬ ì„±ëŠ¥ ìµœì í™” âœ…
	ë°œê²¬: 2025-12-25 21:00 | í•´ê²°: 2025-12-25 21:30
	- âœ… ë¬¸ì œ: ì´ë²¤íŠ¸ë‹¹ ~12ì´ˆ ì†Œìš” (53ê°œ ì´ë²¤íŠ¸ ì²˜ë¦¬ì— 10ë¶„ ì´ìƒ)
	- âœ… ì›ì¸ 1: calculate_dayOffset_dates()ê°€ ê° dayOffsetë§ˆë‹¤ DB ì¡°íšŒ
	- âœ… ì›ì¸ 2: ê° ì´ë²¤íŠ¸ë§ˆë‹¤ ê°œë³„ DB UPDATE ì‹¤í–‰
	- âœ… í•´ê²° 1: ê±°ë˜ì¼ ì •ë³´ ë¯¸ë¦¬ ìºì‹œ (get_trading_days_in_range)
	- âœ… í•´ê²° 2: ë°°ì¹˜ DB ì—…ë°ì´íŠ¸ (UNNEST ì‚¬ìš©)
	
	**ì„±ëŠ¥ ê°œì„  íš¨ê³¼**:
	| í•­ëª© | Before | After | ê°œì„ ìœ¨ |
	|------|--------|-------|--------|
	| ê±°ë˜ì¼ DB ì¡°íšŒ | ì´ë²¤íŠ¸Ã—dayOffset | 1íšŒ | **99% â†“** |
	| DB UPDATE | ì´ë²¤íŠ¸ë‹¹ 1íšŒ | ë°°ì¹˜ 1íšŒ | **99% â†“** |
	| 53ê°œ ì´ë²¤íŠ¸ | ~10ë¶„ | ~10ì´ˆ | **98% â†“** |

---

## 6. ì‹œê°„ì  ìœ íš¨ì„± ì´ìŠˆ - 2025-12-27 (I-25 ~ I-27)

### I-25: APIë³„ ê¸°ì¤€ ë‚ ì§œ ë¶ˆì¼ì¹˜ (Temporal Validity Mismatch) âœ…
	ë°œê²¬: 2025-12-27 | í•´ê²°: 2025-12-27
	- âœ… marketCap: `fmp-historical-market-capitalization` APIë¡œ í•´ê²° ì™„ë£Œ
	  - API: `/stable/historical-market-capitalization?symbol={ticker}&from={fromDate}&to={toDate}`
	  - **í•µì‹¬**: `from`/`to` íŒŒë¼ë¯¸í„°ë¡œ ë‚ ì§œ ë²”ìœ„ íŠ¹ì • ê°€ëŠ¥
	  - ì‘ë‹µì— date í•„ë“œ í¬í•¨ â†’ event_date ê¸°ì¤€ í•„í„°ë§ ê°€ëŠ¥
	  - **êµ¬í˜„**: ì‹œê³„ì—´ ë°ì´í„°ì—ì„œ ê°€ì¥ ìµœê·¼ ë‚ ì§œì˜ ê°’(ì²« ë²ˆì§¸) ì„ íƒ
	- âŒ fmp-price-target-consensus API: í˜„ì¬ ì‹œì  consensusë§Œ ë°˜í™˜ (I-26 ì´ìŠˆ)
	- âœ… ì¬ë¬´ì œí‘œ API: event_date ê¸°ì¤€ í•„í„°ë§ ì ìš©ë¨ (ì •ìƒ)
	
	**êµ¬í˜„ ì™„ë£Œ ì‚¬í•­**:
	- âœ… SQL ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±: `backend/scripts/fix_I25_historical_market_cap.sql`
	- âœ… config_lv1_api_listì— fmp-historical-market-capitalization API ì¶”ê°€ (ì‚¬ìš©ì ì§ì ‘ ë°˜ì˜)
	- âœ… config_lv2_metricì—ì„œ marketCap ë©”íŠ¸ë¦­ì˜ api_list_id ë³€ê²½ (ì‚¬ìš©ì ì§ì ‘ ë°˜ì˜)
	- âœ… valuation_service.pyì—ì„œ historical-market-cap API í˜¸ì¶œ ì‹œ from/to íŒŒë¼ë¯¸í„° ì²˜ë¦¬
	- âœ… metric_engine.pyì—ì„œ ì‹œê³„ì—´ marketCap ì‘ë‹µì—ì„œ ê°€ì¥ ìµœê·¼ ê°’ë§Œ ì¶”ì¶œ

### I-26: consensus_summary_cacheê°€ event_date ë¬´ì‹œ âœ…
	ë°œê²¬: 2025-12-27 | í•´ê²°: 2025-12-27
	- âœ… ë¬¸ì œ: FMP APIê°€ í˜„ì¬ ì‹œì  consensusë§Œ ì œê³µ, ê³¼ê±° ë°ì´í„° ì—†ìŒ
	- âœ… í•´ê²°: ê³¼ê±° ì´ë²¤íŠ¸(7ì¼ ì´ì „)ì—ëŠ” consensus ê°’ì„ NULLë¡œ ì²˜ë¦¬
	- âœ… `_meta` í•„ë“œì— ë°ì´í„° ê°€ìš©ì„± ë° ì´ìœ  ëª…ì‹œ
	- âœ… ìµœê·¼ ì´ë²¤íŠ¸(7ì¼ ì´ë‚´)ì—ëŠ” í˜„ì¬ consensus ê°’ ì‚¬ìš© (ì •ìƒ)
	
	**êµ¬í˜„ ì™„ë£Œ ì‚¬í•­**:
	- âœ… `calculate_qualitative_metrics_fast()` í•¨ìˆ˜ ìˆ˜ì •
	- âœ… ê³¼ê±° ì´ë²¤íŠ¸ íŒë‹¨ ë¡œì§ ì¶”ê°€ (`event_date < today - 7days`)
	- âœ… `_meta` í•„ë“œì— `dataAvailable`, `reason`, `fetchDate` ì •ë³´ í¬í•¨

### I-27: priceTrend í‹°ì»¤ë³„ 1íšŒ í˜¸ì¶œ í™•ì¸ âœ…
	ë°œê²¬: 2025-12-27 | í™•ì¸ ì™„ë£Œ
	- âœ… generate_price_trends()ì—ì„œ ohlc_cacheë¥¼ í‹°ì»¤ë³„ë¡œ êµ¬ì¶•
	- âœ… ê° ì´ë²¤íŠ¸ëŠ” ìºì‹œì—ì„œ ë‚ ì§œ ê¸°ë°˜ ì¡°íšŒ
	- âœ… í‹°ì»¤ë‹¹ 1íšŒë§Œ OHLC API í˜¸ì¶œë¨ (ì •ìƒ ì‘ë™)

### I-28: ì¬ë¬´ì œí‘œ TTM ê³„ì‚° ì‹œê°„ì  ìœ íš¨ì„± í™•ì¸ âœ…
	ë°œê²¬: 2025-12-27 | í™•ì¸ ì™„ë£Œ
	- âœ… fmp-income-statement ì‘ë‹µì—ì„œ event_date ê¸°ì¤€ í•„í„°ë§ ì •ìƒ ì‘ë™
	- âœ… í•„í„°ë§ ë¡œì§: `_get_record_date(r) <= event_date_obj`
	- âœ… TTM ê³„ì‚°: í•„í„°ë§ í›„ ìµœê·¼ 4ë¶„ê¸° í•©ì‚°
	- âœ… ì˜ˆì‹œ: event_date=2024-12-22 â†’ 2024-12-28 ë¶„ê¸° ì œì™¸ë¨ (ì •ìƒ)
	
	**í•µì‹¬ ë¡œì§ ìœ„ì¹˜**:
	- `valuation_service.py:847-850`: ë‚ ì§œ í•„í„°ë§
	- `metric_engine.py:689-722`: TTM í•©ì‚° (_ttm_sum_or_scaled)

---

## 7. consensusSignal ë° ë©”íƒ€ë°ì´í„° ì´ìŠˆ - 2025-12-30 (I-29 ~ I-30)

### I-29: evt_consensus 2ë‹¨ê³„ ê³„ì‚° ë¯¸ì‹¤í–‰ âœ…
	ë°œê²¬: 2025-12-30 | í•´ê²°ë¨
	- âœ… evt_consensus í…Œì´ë¸”ì˜ price_target_prev, price_when_posted_prev, directionì´ ëª¨ë‘ NULL
	- âœ… ì›ì¸: GET /sourceData?mode=consensusì˜ 2ë‹¨ê³„ ê³„ì‚°ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
	- âœ… í•´ê²°: calc_mode=calculation ëª¨ë“œ ì¶”ê°€ (API í˜¸ì¶œ ì—†ì´ 2ë‹¨ê³„ ê³„ì‚°ë§Œ ìˆ˜í–‰)
	- âœ… ì‚¬ìš©ë²•: GET /sourceData?mode=consensus&calc_mode=calculation&calc_scope=all

### I-30: ë©”íŠ¸ë¦­ë³„ ì›ì²œ ë‚ ì§œ ì¶”ì  (ì˜µì…˜ B ì±„íƒ) âœ…
	ë°œê²¬: 2025-12-30 | í•´ê²°ë¨: 2025-12-31
	- âœ… ê° ë©”íŠ¸ë¦­ë³„ë¡œ ì›ì²œ ë°ì´í„°ì˜ ë‚ ì§œ ì •ë³´ê°€ ê¸°ë¡ë¨
	- âœ… MetricCalculationEngineì— metric_sources ë”•ì…”ë„ˆë¦¬ ì¶”ê°€
	- âœ… _calculate_api_field_with_source: API ì‘ë‹µì—ì„œ ë‚ ì§œ ì¶”ì¶œ
	- âœ… _calculate_aggregation_with_source: ê¸°ë³¸ ë©”íŠ¸ë¦­ ì†ŒìŠ¤ ìƒì†
	- âœ… _calculate_expression_with_source: ì˜ì¡´ì„± ì†ŒìŠ¤ ìˆ˜ì§‘
	- âœ… _group_by_domain: _meta.sourcesì— ë©”íŠ¸ë¦­ë³„ ìƒì„¸ ì†ŒìŠ¤ ì •ë³´ í¬í•¨

### I-31: targetSummary ê³„ì‚° (consensusSummary ëŒ€ì²´) âœ…
	ë°œê²¬: 2025-12-31 | í•´ê²°ë¨
	- âœ… evt_consensus í…Œì´ë¸”ì— target_summary JSONB ì»¬ëŸ¼ ì¶”ê°€
	- âœ… GET /sourceData?mode=consensusì— Phase 3 ì¶”ê°€ (targetSummary ê³„ì‚° ë° ì €ì¥)
	- âœ… overwrite=true: ì§€ì •ëœ scopeì˜ ëª¨ë“  í–‰ ì¬ê³„ì‚°
	- âœ… overwrite=false: target_summaryê°€ NULLì¸ í–‰ë§Œ ê³„ì‚°
	- âœ… POST /backfillEventsTableì—ì„œ evt_consensus.target_summary ì½ê¸°

---

## 8. UI/UX ê°œì„  ì´ìŠˆ - 2025-12-31 (I-32 ~ I-34)

### I-32: Log íŒ¨ë„ ë¦¬ì‚¬ì´ì¦ˆ ê¸°ëŠ¥ âœ…
	ë°œê²¬: 2025-12-31 | í•´ê²°ë¨
	- âœ… ìš”êµ¬ì‚¬í•­: Cursorì˜ agent UIì²˜ëŸ¼ ë§ˆìš°ìŠ¤ë¡œ íŒ¨ë„ í¬ê¸° ì¡°ì •
	- âœ… êµ¬í˜„: BottomPanelì— ë“œë˜ê·¸ ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ëŸ¬ ì¶”ê°€
	- âœ… í•˜ë‹¨ íŒ¨ë„: ìƒë‹¨ ê°€ì¥ìë¦¬ ë“œë˜ê·¸ â†’ ë†’ì´ ì¡°ì ˆ (200px ~ 600px)
	- âœ… ìš°ì¸¡ íŒ¨ë„: ì¢Œì¸¡ ê°€ì¥ìë¦¬ ë“œë˜ê·¸ â†’ ë„ˆë¹„ ì¡°ì ˆ (300px ~ 800px)
	- âœ… ë§ˆìš°ìŠ¤ í˜¸ë²„ ì‹œ íŒŒë€ìƒ‰ í•˜ì´ë¼ì´íŠ¸ë¡œ ë¦¬ì‚¬ì´ì¦ˆ ì˜ì—­ í‘œì‹œ

### I-33: ë³¸ë¬¸ 80% ë„ˆë¹„ ë° ê°€ìš´ë° ì •ë ¬ âœ…
	ë°œê²¬: 2025-12-31 | í•´ê²°ë¨
	- âœ… ìš”êµ¬ì‚¬í•­: ëª¨ë“  ë¼ìš°í„° ë³¸ë¬¸ì´ ì¶œë ¥ ì˜ì—­ì˜ 80% ë„ˆë¹„ë¡œ ê°€ìš´ë° ì •ë ¬
	- âœ… ì ìš© í˜ì´ì§€: /requests, /setRequests, /control, /conditionGroup, /dashboard
	- âœ… /requests: Wrapper divë¡œ íŒ¨ë„ ì˜ì—­ ì œì™¸ í›„ 80% ì ìš©
	- âœ… íŒ¨ë„ ì ‘í˜/í¼ì¹¨ ìƒíƒœì—ì„œë„ 80% ìœ ì§€

### I-34: /setRequests API ë³€ê²½ ê¸°ëŠ¥ (Schema ê¸°ë°˜ ê²€ì¦) âœ…
	ë°œê²¬: 2025-12-31 | í•´ê²°ë¨
	- âœ… ìš”êµ¬ì‚¬í•­: ê° ì—”ë“œí¬ì¸íŠ¸/ëª¨ë“œë³„ config_lv1_api_list ID ë³€ê²½ ê°€ëŠ¥
	- âœ… ê²€ì¦ ë°©ì‹: API í˜¸ì¶œ ì—†ì´ config_lv1_api_list.schema í•„ë“œë¡œ í•„ìˆ˜ í‚¤ ì¡´ì¬ í™•ì¸
	- âœ… UI: ëª¨ë“œë³„ "ë³€ê²½" ë²„íŠ¼ â†’ ëª¨ë‹¬ì—ì„œ ìƒˆ API ì„ íƒ â†’ Schema ê²€ì¦ â†’ ì €ì¥
	- âœ… ê²€ì¦ ì‹¤íŒ¨ ì‹œ ì €ì¥ ë¶ˆê°€, ëˆ„ë½ëœ í‚¤ í‘œì‹œ

### I-35: GET /sourceData ë³‘ë ¬ ì²˜ë¦¬ ì„±ëŠ¥ ê°œì„  âœ…
	ë°œê²¬: 2025-12-31 | í•´ê²°ë¨
	- âœ… mode=consensus: í‹°ì»¤ë³„ API í˜¸ì¶œ ë³‘ë ¬ ì²˜ë¦¬ (asyncio.Semaphore)
	- âœ… mode=earning: ë‚ ì§œ ë²”ìœ„ë³„ API í˜¸ì¶œ ë³‘ë ¬ ì²˜ë¦¬
	- âœ… ë™ì‹œì„±: API_CONCURRENCY = 10 (Rate limit ê³ ë ¤)
	- âœ… ì§„í–‰ë¥  ë¡œê¹…: ë°°ì¹˜ë³„ progress, ETA ì¶œë ¥
	
	**ì„±ëŠ¥ ê°œì„  íš¨ê³¼** (mode=consensus ê¸°ì¤€):
	| í•­ëª© | Before | After | ê°œì„ ìœ¨ |
	|------|--------|-------|--------|
	| ì²˜ë¦¬ ë°©ì‹ | ìˆœì°¨ (1ê°œì”©) | ë³‘ë ¬ (10ê°œ ë™ì‹œ) | - |
	| 5000 í‹°ì»¤ ì˜ˆìƒ | ~83ë¶„ | ~8ë¶„ | **90% â†“** |

---

## 9. ê³„ì‚° ë¡œì§ ê²€í†  ì´ìŠˆ - 2025-12-31 (I-36 ~ I-37)

### I-36: Quantitative Position/Disparity í•­ìƒ None ğŸ”„ DEPRECATED
	ë°œê²¬: 2025-12-31 | í•´ê²°ë¨: 2025-12-31 | **íê¸°ë¨: 2026-01-02** (I-41ë¡œ ëŒ€ì²´)

	âš ï¸ **DEPRECATED**: ì´ ì´ìŠˆëŠ” ì„ì‹œ í•´ê²°ì±…ì´ì—ˆìœ¼ë©°, I-41ì—ì„œ ì›ë³¸ ì„¤ê³„ëŒ€ë¡œ `priceQuantitative` ë©”íŠ¸ë¦­ì„ êµ¬í˜„í•˜ì—¬ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤.

	**íê¸° ì´ìœ **:
	- ì›ë³¸ ì„¤ê³„(`1_guideline(function).ini`)ëŠ” `priceQuantitative` **ë©”íŠ¸ë¦­**ì„ ìš”êµ¬í–ˆìœ¼ë‚˜, ì´ í•´ê²°ì±…ì€ `calcFairValue` **íŒŒë¼ë¯¸í„°**ë¡œ ìš°íšŒí•¨
	- `config_lv2_metric` í…Œì´ë¸”ì— ë©”íŠ¸ë¦­ì„ ì •ì˜í•˜ì§€ ì•Šì•„ ì„¤ê³„ ë¶ˆì¼ì¹˜ ë°œìƒ
	- I-41ì—ì„œ ë©”íŠ¸ë¦­ ì‹œìŠ¤í…œì— í†µí•©í•˜ì—¬ ê·¼ë³¸ì ìœ¼ë¡œ í•´ê²°

	**ë§ˆì´ê·¸ë ˆì´ì…˜**:
	- `calcFairValue` íŒŒë¼ë¯¸í„°ëŠ” I-41 ë°°í¬ í›„ ì œê±°ë  ì˜ˆì •
	- ê³„ì‚° ë¡œì§ (`get_peer_tickers`, `calculate_sector_average_metrics` ë“±)ì€ I-41ì—ì„œ ì¬ì‚¬ìš©ë¨

	---

	**ì›ë˜ êµ¬í˜„ ë‚´ìš©** (ì°¸ê³ ìš©):

	**í˜„ìƒ**: txn_events.position_quantitative, disparity_quantitativeê°€ í•­ìƒ NULL

	**ì›ì¸**: Quantitative ì§€í‘œ(PER, PBR, PSR ë“±)ì—ì„œ "ëª©í‘œ ì£¼ê°€(price_target)"ë¥¼ ì§ì ‘ ë„ì¶œí•˜ëŠ” ë¡œì§ ì—†ìŒ

	**ì‚¬ìš©ì ì„ íƒ**: **ì˜µì…˜ A** - ì—…ì¢… í‰ê·  ëŒ€ë¹„ ì ì •ê°€ ê³„ì‚°

	**êµ¬í˜„ ë‚´ìš©**:
	- âœ… `fmp-stock-peers` APIë¡œ ë™ì¢… ì—…ì¢… í‹°ì»¤ ì¡°íšŒ (symbolë§Œ ì‚¬ìš©, ë‹¤ë¥¸ ê°’ì€ event_dateì™€ ë¬´ê´€)
	- âœ… `calculate_sector_average_metrics()`: ë™ì¢… ì—…ì¢… í‰ê·  PER/PBR ê³„ì‚°
	- âœ… `calculate_fair_value_from_sector()`: ì—…ì¢… í‰ê·  PER Ã— EPSë¡œ ì ì •ê°€ ê³„ì‚°
	- âœ… `calculate_fair_value_for_ticker()`: í†µí•© í•¨ìˆ˜
	- âœ… `calcFairValue` íŒŒë¼ë¯¸í„° ì¶”ê°€ (ì„ íƒì  ê¸°ëŠ¥)

	**ì‚¬ìš©ë²•**:
	```bash
	# ì—…ì¢… í‰ê·  ê¸°ë°˜ ì ì •ê°€ ê³„ì‚° í™œì„±í™”
	POST /backfillEventsTable?calcFairValue=true&tickers=AAPL
	```

### I-37: targetMedian ëª…ì¹­/ê°’ ë¶ˆì¼ì¹˜ (í‰ê·  vs ì¤‘ì•™ê°’) âœ…
	ë°œê²¬: 2025-12-31 | í•´ê²°ë¨: 2025-12-31
	
	**í˜„ìƒ**: ë³€ìˆ˜ëª… `targetMedian`ì¸ë° ì‹¤ì œ ê°’ì€ `AVG(price_target)` (í‰ê· ê°’)
	
	**ì‚¬ìš©ì ì„ íƒ**: **ì˜µì…˜ B** - PostgreSQL PERCENTILE_CONTë¡œ ì‹¤ì œ Median ê³„ì‚° êµ¬í˜„
	
	**êµ¬í˜„ ë‚´ìš©**:
	- âœ… `calculate_target_summary()` SQLì— `PERCENTILE_CONT(0.5)` ì¶”ê°€
	- âœ… ë°˜í™˜ êµ¬ì¡°ì— Median, Avg, Min, Max ëª¨ë‘ í¬í•¨
	- âœ… `valuation_service.py`ì—ì„œ ì‹¤ì œ Median ì‚¬ìš© (`allTimeMedianPriceTarget`)
	
	**ë°ì´í„° ì¬ê³„ì‚°**:
	```bash
	GET /sourceData?mode=consensus&overwrite=true
	```

### I-38: calcFairValue ê¸°ë³¸ê°’ Falseë¡œ ì¸í•œ NULL ğŸ”„ DEPRECATED
	ë°œê²¬: 2026-01-01 | í•´ê²°ë¨: 2026-01-01 | **íê¸°ë¨: 2026-01-02** (I-41ë¡œ ëŒ€ì²´)

	âš ï¸ **DEPRECATED**: `calcFairValue` íŒŒë¼ë¯¸í„° ìì²´ê°€ ì„ì‹œ í•´ê²°ì±…ì´ì—ˆìœ¼ë©°, I-41ì—ì„œ ë©”íŠ¸ë¦­ ì‹œìŠ¤í…œì— í†µí•©ë˜ì–´ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

	**íê¸° ì´ìœ **:
	- íŒŒë¼ë¯¸í„° ê¸°ë°˜ ì ‘ê·¼ì€ ë©”íŠ¸ë¦­ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ì™€ ë¶ˆì¼ì¹˜
	- I-41ì—ì„œ `priceQuantitative` ë©”íŠ¸ë¦­ì„ `config_lv2_metric`ì— ì •ì˜í•˜ë©´ ìë™ìœ¼ë¡œ ê³„ì‚°ë¨
	- ëª…ì‹œì  íŒŒë¼ë¯¸í„° ì „ë‹¬ ë¶ˆí•„ìš”

	**ë§ˆì´ê·¸ë ˆì´ì…˜**:
	- I-41 ë°°í¬ í›„ `calcFairValue` íŒŒë¼ë¯¸í„° ì œê±° ì˜ˆì •
	- ë©”íŠ¸ë¦­ì´ `metrics_by_domain`ì— í¬í•¨ë˜ë©´ ìë™ ê³„ì‚°

	---

	**ì›ë˜ êµ¬í˜„ ë‚´ìš©** (ì°¸ê³ ìš©):

	**í˜„ìƒ**:
	- `POST /backfillEventsTable` í˜¸ì¶œ ì‹œ `position_quantitative`, `disparity_quantitative`ê°€ 100% NULL
	- I-36ì—ì„œ `calcFairValue` íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í–ˆìœ¼ë‚˜, ê¸°ë³¸ê°’ì´ `False`ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ ëª…ì‹œì ìœ¼ë¡œ `?calcFairValue=true`ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê³„ì‚°ë˜ì§€ ì•ŠìŒ

	**ê·¼ë³¸ ì›ì¸**:
	- `backend/src/models/request_models.py:248` - `default=False`
	- `backend/src/services/valuation_service.py:441` - `calc_fair_value: bool = False`
	- Quantitative metricsëŠ” price targetì´ ì—†ìœ¼ë¯€ë¡œ, fair value ê³„ì‚° ì—†ì´ëŠ” position/disparityë¥¼ ê³„ì‚°í•  ìˆ˜ ì—†ìŒ

	**í•´ê²°ì±…**:
	- âœ… `BackfillEventsTableQueryParams.calc_fair_value` ê¸°ë³¸ê°’ì„ `True`ë¡œ ë³€ê²½
	- âœ… `calculate_valuations()` í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ë„ `calc_fair_value: bool = True`ë¡œ ë³€ê²½
	- âœ… ì´ì œ íŒŒë¼ë¯¸í„° ì—†ì´ `POST /backfillEventsTable` í˜¸ì¶œí•´ë„ ìë™ìœ¼ë¡œ position/disparity ê³„ì‚°ë¨

	**ì˜í–¥**:
	- ì—…ì¢… í‰ê·  PER/PBR ê¸°ë°˜ ì ì •ê°€ ìë™ ê³„ì‚° (I-36)
	- `fmp-stock-peers` API ì¶”ê°€ í˜¸ì¶œ ë°œìƒ (ì„±ëŠ¥ ì˜í–¥ ë¯¸ë¯¸)

	**ê²€ì¦**:
	```bash
	# ì¬ê³„ì‚° (calcFairValue=trueê°€ ê¸°ë³¸ê°’)
	POST /backfillEventsTable

	# ë˜ëŠ” ëª…ì‹œì ìœ¼ë¡œ ë¹„í™œì„±í™” ê°€ëŠ¥
	POST /backfillEventsTable?calcFairValue=false
	```

---

## 10. ì„¤ê³„ ë¶ˆì¼ì¹˜ í•´ê²° ì´ìŠˆ - 2026-01-02 (I-41)

### I-41: priceQuantitative ë©”íŠ¸ë¦­ ë¯¸êµ¬í˜„ (ì„¤ê³„ ë¶ˆì¼ì¹˜) + ì„ íƒì  ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸ âœ…
	ë°œê²¬: 2026-01-02 | í•´ê²°ë¨: 2026-01-02

	**Part 1: ì„¤ê³„ ë¶ˆì¼ì¹˜ - priceQuantitative ë©”íŠ¸ë¦­ êµ¬í˜„**

	**í˜„ìƒ**:
	- ì›ë³¸ ì„¤ê³„(`prompt/1_guideline(function).ini`:892-897)ëŠ” `priceQuantitative` ë©”íŠ¸ë¦­ ì‚¬ìš©ì„ ëª…ì‹œ
	- ì‹¤ì œ êµ¬í˜„ì—ëŠ” `priceQuantitative` ë©”íŠ¸ë¦­ì´ `config_lv2_metric` í…Œì´ë¸”ì— ì¡´ì¬í•˜ì§€ ì•ŠìŒ
	- ëŒ€ì‹  I-36ì—ì„œ `calcFairValue` íŒŒë¼ë¯¸í„°ë¡œ ìš°íšŒ êµ¬í˜„

	**ê·¼ë³¸ ì›ì¸**:
	- ì„¤ê³„ ë¬¸ì„œì™€ êµ¬í˜„ ê°„ ë¶ˆì¼ì¹˜
	- ë©”íŠ¸ë¦­ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ë¥¼ ë”°ë¥´ì§€ ì•Šì€ ì„ì‹œ í•´ê²°ì±… (I-36, I-38)

	**LLM ì œì•ˆ**: 2ê°€ì§€ ì˜µì…˜ ì œì‹œ
	- **ì˜µì…˜ A**: ì›ë³¸ ì„¤ê³„ëŒ€ë¡œ priceQuantitative ë©”íŠ¸ë¦­ êµ¬í˜„ (ë©”íŠ¸ë¦­ ì‹œìŠ¤í…œ í†µí•©)
	- **ì˜µì…˜ B**: calcFairValue íŒŒë¼ë¯¸í„° ìœ ì§€ (ë¹ ë¥¸ ìš°íšŒ í•´ê²°)

	**ì‚¬ìš©ì ì„ íƒ**: **ì˜µì…˜ A** ì±„íƒ - ê·¼ë³¸ì  í•´ê²° ì„ í˜¸

	**LLM ë°˜ì˜ - ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**:
	- âœ… `config_lv2_metric` í…Œì´ë¸”ì— `priceQuantitative` ë©”íŠ¸ë¦­ ì •ì˜
	- âœ… source='custom' ì§€ì›ì„ ìœ„í•œ CHECK ì œì•½ì¡°ê±´ ì—…ë°ì´íŠ¸
	- âœ… aggregation_paramsì— ê³„ì‚° ë°©ë²• ë©”íƒ€ë°ì´í„° ì €ì¥

	**ë©”íŠ¸ë¦­ ì •ì˜** (`backend/scripts/add_priceQuantitative_metric.sql`):
	```sql
	INSERT INTO config_lv2_metric (
	    id, source, domain, aggregation_params
	) VALUES (
	    'priceQuantitative',
	    'custom',
	    'quantitative-valuation',
	    '{"calculation_method": "sector_average_fair_value", ...}'::jsonb
	);
	```

	**LLM ë°˜ì˜ - ë°±ì—”ë“œ êµ¬í˜„**:
	- âœ… `MetricEngine.calculate_all()`: custom_values íŒŒë¼ë¯¸í„° ì¶”ê°€
	- âœ… `MetricEngine._calculate_metric_with_reason()`: source='custom' ì²˜ë¦¬ ë¡œì§
	- âœ… `calculate_price_quantitative_metric()`: ê¸°ì¡´ calcFairValue ë¡œì§ ë˜í•‘
	- âœ… `process_ticker_batch()`: priceQuantitative ê³„ì‚° í›„ custom_valuesë¡œ ì „ë‹¬

	**ê³„ì‚° í”„ë¡œì„¸ìŠ¤**:
	1. `fmp-stock-peers` APIë¡œ ë™ì¢… ì—…ì¢… í‹°ì»¤ ì¡°íšŒ
	2. ê° peer í‹°ì»¤ì˜ PER/PBR ê³„ì‚°
	3. IQR ë°©ì‹ìœ¼ë¡œ ì´ìƒì¹˜ ì œê±° í›„ í‰ê·  ê³„ì‚°
	4. `fair_value = sector_avg_PER Ã— (price / current_PER)`
	5. `position_quantitative = 'long' if fair_value > price else 'short'`
	6. `disparity_quantitative = (fair_value / price) - 1`

	---

	**Part 2: ì„ íƒì  ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ (Selective Metric Update)**

	**ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­**:
	> "í…Œì´ë¸”ì— ê°’ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì±„ì›Œë„£ê¸° ìœ„í•´ txn_events í…Œì´ë¸”ì˜ config_lv2_metric í…Œì´ë¸”ì˜ idë³„ë¡œ íŒŒë¼ë¯¸í„°ì— ê°’ì„ ì…ë ¥í•˜ë©´
	> í•´ë‹¹í•˜ëŠ” ê°’ë§Œ overwrite í•˜ê±°ë‚˜ null ê°’ë§Œ ì—…ë°ì´íŠ¸ í•˜ê±°ë‚˜ ì…ë ¥í•œ tickerì— ëŒ€í•´ì„œë§Œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡"

	**LLM ì œì•ˆ**: 3ê°€ì§€ ì˜µì…˜ ì œì‹œ
	- **ì˜µì…˜ 1**: metrics íŒŒë¼ë¯¸í„°ë§Œ ì¶”ê°€ (ë‹¨ìˆœ)
	- **ì˜µì…˜ 2**: metrics + overwriteMetrics íŒŒë¼ë¯¸í„° (ìœ ì—°)
	- **ì˜µì…˜ 3**: ì˜µì…˜ 2 + DB ë ˆë²¨ selective update (ì™„ì „)

	**ì‚¬ìš©ì ì„ íƒ**: **ì˜µì…˜ 3** ì±„íƒ - ì™„ì „í•œ êµ¬í˜„ ì„ í˜¸

	**LLM ë°˜ì˜ - API íŒŒë¼ë¯¸í„°**:
	- âœ… `metrics`: ì—…ë°ì´íŠ¸í•  ë©”íŠ¸ë¦­ ID ë¦¬ìŠ¤íŠ¸ (ì˜ˆ: `priceQuantitative,PER,PBR`)
	- âœ… `overwriteMetrics`: True=ë®ì–´ì“°ê¸°, False=NULLë§Œ ì—…ë°ì´íŠ¸
	- âœ… `BackfillEventsTableQueryParams.get_metrics_list()`: íŒŒì‹± í•¨ìˆ˜ ì¶”ê°€

	**LLM ë°˜ì˜ - ë°±ì—”ë“œ ë¡œì§**:
	- âœ… `calculate_valuations()`: metrics_list íŒŒë¼ë¯¸í„° ì¶”ê°€
	- âœ… `process_ticker_batch()`: metrics_listë¥¼ DB ì—…ë°ì´íŠ¸ì— ì „ë‹¬
	- âœ… `batch_update_event_valuations()`: JSONB ì„ íƒì  ë³‘í•© ì¿¼ë¦¬ êµ¬í˜„

	**ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸ ë¡œì§** (`backend/src/database/queries/metrics.py`):
	```sql
	-- metrics_list ì§€ì • ì‹œ: JSONB || ì—°ì‚°ìë¡œ ì„ íƒì  ë³‘í•©
	SET value_quantitative = COALESCE(e.value_quantitative, '{}'::jsonb) || b.value_quantitative

	-- metrics_list ë¯¸ì§€ì • ì‹œ: ê¸°ì¡´ ë¡œì§ (ì „ì²´ êµì²´ ë˜ëŠ” NULLë§Œ ì—…ë°ì´íŠ¸)
	```

	**ì‚¬ìš©ë²• ì˜ˆì‹œ**:
	```bash
	# priceQuantitativeë§Œ NULL ê°’ ì—…ë°ì´íŠ¸
	POST /backfillEventsTable?metrics=priceQuantitative&overwriteMetrics=false

	# priceQuantitative ê°•ì œ ì¬ê³„ì‚° (ë®ì–´ì“°ê¸°)
	POST /backfillEventsTable?metrics=priceQuantitative&overwriteMetrics=true

	# íŠ¹ì • tickerì˜ ì—¬ëŸ¬ ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
	POST /backfillEventsTable?tickers=AAPL&metrics=priceQuantitative,PER,PBR&overwriteMetrics=true
	```

	---

	**Part 3: API ë‹¨ìˆœí™” (overwriteMetrics ì œê±°)** - 2026-01-02

	ì‚¬ìš©ì ì œì•ˆìœ¼ë¡œ `overwriteMetrics` íŒŒë¼ë¯¸í„°ë¥¼ ì œê±°í•˜ê³  ê¸°ì¡´ `overwrite` íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¥:
	- **ë¬¸ì œ**: `overwrite`ì™€ `overwriteMetrics` 2ê°œ íŒŒë¼ë¯¸í„°ë¡œ ì¸í•œ UX í˜¼ë€
	- **ì‚¬ìš©ì ì œì•ˆ**: "overwriteMetricsëŠ” ì´ë¯¸ ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ì— overwrite íŒŒë¼ë¯¸í„°ê°€ ìˆì–´ ì´ê²ƒì„ ì‚¬ìš©í•˜ë©´ ë˜ëŠ” ê²ƒ ì•„ë‹Œê°€ìš”?"
	- **LLM ë™ì˜**: ë‹¨ì¼ íŒŒë¼ë¯¸í„°ë¡œ ë¬¸ë§¥ì  ì˜ë¯¸ ë¶€ì—¬ (metrics ìœ ë¬´ì— ë”°ë¼)
	- **ë°˜ì˜**:
	  - `overwriteMetrics` íŒŒë¼ë¯¸í„° ì™„ì „ ì œê±°
	  - `overwrite` íŒŒë¼ë¯¸í„° ì˜ë¯¸ í™•ì¥:
	    - `metrics` ì§€ì • ì‹œ: í•´ë‹¹ ë©”íŠ¸ë¦­ì—ë§Œ ì ìš©
	    - `metrics` ë¯¸ì§€ì • ì‹œ: ì „ì²´ í•„ë“œì— ì ìš©
	  - ë°±ì—”ë“œ 4ê°œ íŒŒì¼, í”„ë¡ íŠ¸ì—”ë“œ 2ê°œ íŒŒì¼ ìˆ˜ì •

	**ì•Œë ¤ì§„ ì œí•œì‚¬í•­**:
	- Peer tickers ë¯¸ì¡´ì¬ ì‹œ priceQuantitative NULL (ì†Œí˜•ì£¼, íŠ¹ìˆ˜ ì„¹í„°)
	- fmp-stock-peersëŠ” í˜„ì¬ peer ëª©ë¡ë§Œ ë°˜í™˜ (ê³¼ê±° ë°ì´í„° ì—†ìŒ)

	**íê¸°ëœ ì´ìŠˆ**:
	- **I-36**: calcFairValue íŒŒë¼ë¯¸í„° ë°©ì‹ â†’ priceQuantitative ë©”íŠ¸ë¦­ìœ¼ë¡œ ëŒ€ì²´
	- **I-38**: calcFairValue ê¸°ë³¸ê°’ â†’ ë©”íŠ¸ë¦­ ìë™ ê³„ì‚°ìœ¼ë¡œ ëŒ€ì²´
	- **I-40**: Peer tickers ë¡œê¹… â†’ priceQuantitative ì œí•œì‚¬í•­ìœ¼ë¡œ í†µí•©

	**ìˆ˜ì •ëœ íŒŒì¼**:
	- `backend/scripts/add_priceQuantitative_metric.sql`: ë©”íŠ¸ë¦­ ì •ì˜
	- `backend/src/models/request_models.py`: metrics íŒŒë¼ë¯¸í„°, overwrite ì˜ë¯¸ í™•ì¥
	- `backend/src/routers/events.py`: íŒŒë¼ë¯¸í„° íŒŒì‹± (overwriteMetrics ì œê±°)
	- `backend/src/services/valuation_service.py`: ê³„ì‚° ë¡œì§ í†µí•© (overwriteMetrics ì œê±°)
	- `backend/src/services/metric_engine.py`: custom_values ì§€ì›
	- `backend/src/database/queries/metrics.py`: ì„ íƒì  JSONB ì—…ë°ì´íŠ¸ (SQL ë‹¨ìˆœí™”)
	- `frontend/src/pages/RequestsPage.jsx`: metrics, calcFairValue íŒŒë¼ë¯¸í„° ì¶”ê°€
	- `frontend/src/pages/SetRequestsPage.jsx`: endpoint flow íŒŒë¼ë¯¸í„° ì—…ë°ì´íŠ¸

	**ì°¸ì¡°**:
	- ì„¤ê³„ ë¬¸ì„œ: `backend/DESIGN_priceQuantitative_metric.md`
	- SQL ìŠ¤í¬ë¦½íŠ¸: `backend/scripts/add_priceQuantitative_metric.sql`
	- ì´ìŠˆ ë¶„ì„: `history/ISSUE_priceQuantitative_MISSING.md`

### I-42: fmp-stock-peers API schema mapping ì˜¤ë¥˜ + priceQuantitative DB ì €ì¥ ì‹¤íŒ¨ ğŸ”„
	ë°œê²¬: 2026-01-02 | ì§„í–‰ì¤‘

	**Part 1: Schema Mapping Error (âœ… ì™„ë£Œ)**

	**í˜„ìƒ**:
	- I-41 êµ¬í˜„ í›„ RGTIì˜ priceQuantitativeê°€ ì—¬ì „íˆ NULL
	- Peer ticker API í˜¸ì¶œ ì‹œ schema mapping TypeError ë°œìƒ
	- ì—ëŸ¬: `TypeError: unhashable type: 'dict'` at `external_api.py:86`

	**ì›ì¸**:
	- `fmp-stock-peers` API schemaê°€ nested dict êµ¬ì¡°ë¡œ ì •ì˜ë¨
	- `_apply_schema_mapping()` í•¨ìˆ˜ê°€ nested schemaë¥¼ ì²˜ë¦¬í•˜ì§€ ëª»í•¨
	- `reverse_schema = {v: k for k, v in schema.items()}` ì—ì„œ dictë¥¼ keyë¡œ ì‚¬ìš© ì‹œë„

	**LLM ì œì•ˆ**: 3ê°€ì§€ ì˜µì…˜ ì œì‹œ
	- **ì˜µì…˜ A**: Schema mapping í•¨ìˆ˜ ê°œì„  (nested schema ì§€ì› ì¶”ê°€)
	- **ì˜µì…˜ B**: fmp-stock-peers schemaë¥¼ flat êµ¬ì¡°ë¡œ ë³€ê²½
	- **ì˜µì…˜ C**: Schema mapping ìš°íšŒ (íŠ¹ì • APIë§Œ)

	**ì‚¬ìš©ì ì„ íƒ**: ì‚¬ìš©ì ëª…ì‹œ ì—†ìŒ â†’ LLMì´ **ì˜µì…˜ A + B ê²°í•©** ì„ íƒ
	- ì˜µì…˜ A: `_apply_schema_mapping()` í•¨ìˆ˜ ê°œì„ ìœ¼ë¡œ ë²”ìš© í•´ê²°
	- ì˜µì…˜ B: `fmp-stock-peers` schemaë¥¼ ì‹¤ì œ API ì‘ë‹µì— ë§ê²Œ ìˆ˜ì •

	**LLM ë°˜ì˜ ë‚´ìš©**:
	- âœ… `external_api.py`: `_apply_schema_mapping()` nested schema ì§€ì› ì¶”ê°€
	  - Line 87-102: nested_schemas ë”•ì…”ë„ˆë¦¬ë¡œ array/object íƒ€ì… ë¶„ë¦¬ ì²˜ë¦¬
	  - Line 104-119: `map_array_items()` helper í•¨ìˆ˜ êµ¬í˜„
	  - Line 121-142: `map_item()` í•¨ìˆ˜ì—ì„œ nested field ì²˜ë¦¬ ë¡œì§ ì¶”ê°€

	- âœ… `valuation_service.py`: `get_peer_tickers()` í•¨ìˆ˜ ìˆ˜ì •
	  - Line 1952-1960: Flat list êµ¬ì¡° ì²˜ë¦¬ (nested peerTickers ì œê±°)
	  - Schema mapping í›„ 'ticker' í•„ë“œ ì§ì ‘ ì¶”ì¶œ

	- âœ… Database: `fmp-stock-peers` schema ìˆ˜ì •
	  ```sql
	  -- Before (nested, ì—ëŸ¬ ë°œìƒ):
	  {
	    "ticker": "symbol",
	    "peerTickers": {
	      "type": "array",
	      "items": {"symbol": {"type": "string", "value": "symbol"}, ...}
	    }
	  }

	  -- After (flat, ì •ìƒ ì‘ë™):
	  {
	    "ticker": "symbol",
	    "companyName": "companyName",
	    "price": "price",
	    "mktCap": "mktCap"
	  }
	  ```

	**ê²€ì¦ ê²°ê³¼** (Part 1):
	- âœ… Peer ticker retrieval: ì„±ê³µ (RGTI â†’ 9 peers: BILI, CACI, DUOL, IONQ, QBTS, QXO, SAIL, SNX, ZBRA)
	- âœ… Sector average calculation: ì„±ê³µ (PER: 20.15, PBR: 3.87)
	- âœ… Fair value calculation: ì„±ê³µ (ë¡œì§ ê²€ì¦ ì™„ë£Œ)

	---

	**Part 2: Database ì €ì¥ ì‹¤íŒ¨ (âœ… ì™„ë£Œ)**

	**í˜„ìƒ**:
	- priceQuantitative ê³„ì‚° ì„±ê³µí•˜ì§€ë§Œ ë°ì´í„°ë² ì´ìŠ¤ì— NULLë¡œ ì €ì¥ë¨
	- `test_full_flow.py` ì‹¤í–‰ ì‹œ "Current price not found!" ì—ëŸ¬ ë°œìƒ
	- ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ ê²°ê³¼ nested structure ë°œê²¬:
	  ```json
	  {
	    "valuation": {
	      "values": {"priceQuantitative": null, "PER": -19.09, ...},
	      "dateInfo": {...}
	    }
	  }
	  ```

	**ì›ì¸ ë¶„ì„**:
	1. **Formatterê°€ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì „ì— í˜¸ì¶œë¨**
	   - `valuation_service.py:264`: `format_value_quantitative()` í˜¸ì¶œ
	   - Nested structure ìƒì„±: `{values: {...}, dateInfo: {...}}`

	2. **ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ê²½ë¡œ ë¶ˆì¼ì¹˜**
	   - ê¸°ëŒ€ ê²½ë¡œ: `value_quantitative->'valuation'->>'priceQuantitative'`
	   - ì‹¤ì œ ê²½ë¡œ: `value_quantitative->'valuation'->'values'->>'priceQuantitative'`

	3. **Cascading failures**
	   - currentPrice ì¡°íšŒ ì‹¤íŒ¨ (`value_qualitative->>'currentPrice'` â†’ NULL)
	   - currentPrice ì—†ìœ¼ë©´ priceQuantitative ê³„ì‚° ì°¨ë‹¨ë¨
	   - ê³„ì‚°ë˜ì–´ë„ nested pathë¡œ ì¸í•´ ì¡°íšŒ ì‹¤íŒ¨

	**LLM ì œì•ˆ**: 3ê°€ì§€ ì˜µì…˜ ì œì‹œ
	- **ì˜µì…˜ A**: Formatterë¥¼ API ì‘ë‹µ ë‹¨ê³„ë¡œ ì´ë™ (ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ í›„)
	- **ì˜µì…˜ B**: Formatter ì™„ì „ ì œê±°, raw engine output ì €ì¥
	- **ì˜µì…˜ C**: ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ë¥¼ nested pathë¡œ ìˆ˜ì •

	**ì‚¬ìš©ì ì„ íƒ**: ì‚¬ìš©ì ëª…ì‹œ ì—†ìŒ â†’ LLMì´ **ì˜µì…˜ B** ì„ íƒ
	- FormatterëŠ” API ì‘ë‹µ í¬ë§·íŒ… ì „ìš©ìœ¼ë¡œ ì‚¬ìš©ë˜ì–´ì•¼ í•¨
	- ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” engineì˜ raw output ì €ì¥ (flat structure)
	- ê¸°ì¡´ ì¿¼ë¦¬ë“¤ê³¼ì˜ í˜¸í™˜ì„± ìœ ì§€

	**LLM ë°˜ì˜ ë‚´ìš©**:
	- âœ… `valuation_service.py:263-287`: Formatter í˜¸ì¶œ ì œê±°
	  ```python
	  # OLD (BROKEN):
	  # formatted_quant = format_value_quantitative(quant_result.get('value'))
	  # formatted_qual = format_value_qualitative(qual_result.get('value'))

	  # NEW (FIXED):
	  value_quant = quant_result.get('value')
	  value_qual = qual_result.get('value')
	  ```

	- âœ… `valuation_service.py:15-16`: Formatter imports ì£¼ì„ ì²˜ë¦¬
	  ```python
	  # I-42: Removed formatter imports - formatting should only be done in API responses
	  # from .utils.response_formatter import format_value_quantitative, format_value_qualitative
	  ```

	- âœ… `metrics.py:274-279`: Debug logging ì¶”ê°€
	  - ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì§ì „ êµ¬ì¡° í™•ì¸ ë¡œê·¸

	**ê²€ì¦ ê²°ê³¼** (Part 2):
	- âœ… Engine output ê²€ì¦: Flat structure í™•ì¸ (`test_engine_output.py`)
	  ```json
	  {
	    "valuation": {
	      "priceQuantitative": 123.45,
	      "PER": -19.09,
	      "_meta": {...}
	    }
	  }
	  ```
	- âœ… custom_values ì „ë‹¬: Engineì—ì„œ ì •ìƒ ì²˜ë¦¬ í™•ì¸
	- â³ ìµœì¢… í†µí•© í…ŒìŠ¤íŠ¸: ì„œë²„ ì¬ì‹œì‘ ë° backfill ì¬ì‹¤í–‰ í•„ìš”

	**ìˆ˜ì •ëœ íŒŒì¼** (ì „ì²´):
	- `backend/src/services/external_api.py`: Schema mapping í•¨ìˆ˜ ê°œì„  (Part 1)
	- `backend/src/services/valuation_service.py`:
	  - Peer ticker ì¶”ì¶œ ë¡œì§ ìˆ˜ì • (Part 1)
	  - Formatter í˜¸ì¶œ ì œê±° (Part 2)
	- `backend/src/database/queries/metrics.py`: Debug logging ì¶”ê°€ (Part 2)
	- Database: `config_lv1_api_list.fmp-stock-peers.schema` ìˆ˜ì • (Part 1)

	**í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±**:
	- `backend/test_rgti_peers_api.py`: API í˜¸ì¶œ í…ŒìŠ¤íŠ¸ (Part 1)
	- `backend/test_sector_averages.py`: Sector average ê³„ì‚° í…ŒìŠ¤íŠ¸ (Part 1)
	- `backend/test_full_flow.py`: End-to-end í…ŒìŠ¤íŠ¸ (Part 1-2)
	- `backend/test_engine_output.py`: Engine flat structure ê²€ì¦ (Part 2)

---

## 11. ì„±ëŠ¥ ìµœì í™” ì´ìŠˆ - 2026-01-05 (I-43)

### I-43: Dashboard Events í‘œ ë¡œë”© ì„±ëŠ¥ ê°œì„  - txn_price_trend í…Œì´ë¸” ë¶„ë¦¬ ğŸ”„
	ë°œê²¬: 2026-01-05 | ì§„í–‰ì¤‘

	**í˜„ìƒ**:
	- GET /dashboard/events ì‘ë‹µ ì†ë„ 2-5ì´ˆ (100í–‰ ê¸°ì¤€)
	- ë§¤ ìš”ì²­ë§ˆë‹¤ JSONB price_trend íŒŒì‹± + 28ê°œ dayOffset ì¶”ì¶œ (2,800ë²ˆ ë”•ì…”ë„ˆë¦¬ ì¡°íšŒ)
	- í•„í„°/ì •ë ¬ ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ì—†ìŒ

	**ì„±ëŠ¥ ë¶„ì„**:
	- ë°ì´í„°ë² ì´ìŠ¤: 146,696í–‰, 182MB (ì¸ë±ìŠ¤ 28MB)
	- ì£¼ìš” ë³‘ëª©: Python JSONB íŒŒì‹± (~1.5ì´ˆ)
	- ë¶€ì°¨ ë³‘ëª©: í•„í„°ë§/ì •ë ¬ ì¸ë±ìŠ¤ ë¶€ì¬ (~500ms)

	**LLM ì œì•ˆ**: 6ê°€ì§€ ìµœì í™” ë°©ì•ˆ
	- **ê³„íš 1**: ê³„ì‚°ëœ ì»¬ëŸ¼ ì¶”ê°€ (80-90% ê°œì„ , ê°€ì¥ íš¨ê³¼ì )
	- **ê³„íš 2**: DB í•¨ìˆ˜ + Materialized View (70-80% ê°œì„ )
	- **ê³„íš 3**: í•„í„°/ì •ë ¬ ì¸ë±ìŠ¤ ì¶”ê°€ (30-50% ê°œì„ , ë¹ ë¥¸ ì ìš©)
	- **ê³„íš 4**: í”„ë¡ íŠ¸ì—”ë“œ ê°€ìƒí™” (ì²´ê° ì„±ëŠ¥ 80% ê°œì„ )
	- **ê³„íš 5**: ì‘ë‹µ ìºì‹± Redis (ìºì‹œ íˆíŠ¸ ì‹œ 95% ê°œì„ )
	- **ê³„íš 6**: í˜ì´ì§€ í¬ê¸° ìµœì í™” (20-30% ê°œì„ )

	**ì‚¬ìš©ì ì„ íƒ**: **ê³„íš 1 ë³€í˜•** - txn_price_trend í…Œì´ë¸” ë¶„ë¦¬
	- price_trend JSONBë¥¼ ë³„ë„ í…Œì´ë¸”ë¡œ ì •ê·œí™”
	- ticker + event_dateë¥¼ PRIMARY KEYë¡œ ì‚¬ìš©
	- 29ê°œ dayOffset ì»¬ëŸ¼ (D-14 ~ D14, D0 í¬í•¨)
	- ê° ì»¬ëŸ¼ì— JSONB ì €ì¥: `{price: {OHLC}, dayOffset0: {close}, performance: {close}}`
	- WTSëŠ” wts_long, wts_short ì»¬ëŸ¼ìœ¼ë¡œ ë¯¸ë¦¬ ê³„ì‚°

	**ì„¤ê³„ í™•ì • ì‚¬í•­** (ì‚¬ìš©ì ë‹µë³€):
	1. âœ… D0 ì»¬ëŸ¼ ìƒì„±: txn_price_trend í…Œì´ë¸”ì—ë§Œ (Dashboard í‘œì—ëŠ” í‘œì‹œ ì•ˆ í•¨)
	2. âœ… JSONB êµ¬ì¡°:
	   ```json
	   {
	     "price_trend": {"low": 25.29, "high": 26.53, "open": 26.37, "close": 25.57},
	     "dayOffset0": {"close": 28.57},
	     "performance": {"close": -0.0018796992}
	   }
	   ```
	3. âœ… WTS ê³„ì‚°: txn_price_trendì— wts_long, wts_short ì»¬ëŸ¼ ì €ì¥
	4. âœ… WTS ì—…ë°ì´íŠ¸: null â†’ ê°’ ì±„ì›Œì§ˆ ë•Œë§ˆë‹¤ ì¬ê³„ì‚°
	5. âœ… ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜: ê¸°ì¡´ txn_events.price_trend â†’ txn_price_trend
	6. âœ… Backfill ê¸°ëŠ¥ ìœ ì§€: tickerë³„ 1íšŒ í˜¸ì¶œ, ë‚ ì§œ ë²”ìœ„, overwrite ëª¨ë‘ ìœ ì§€

	**êµ¬í˜„ ê³„íš** (ë¯¸ì™„ë£Œ):
	- â³ Step 1: txn_price_trend í…Œì´ë¸” ìƒì„± (DDL ìŠ¤í¬ë¦½íŠ¸)
	- â³ Step 2: ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (ê¸°ì¡´ price_trend â†’ ìƒˆ í…Œì´ë¸”)
	- â³ Step 3: POST /backfillEventsTable ìˆ˜ì • (ìƒˆ í…Œì´ë¸”ì— ë°ì´í„° ì±„ìš°ê¸°)
	- â³ Step 4: GET /dashboard/events ìˆ˜ì • (LEFT JOINìœ¼ë¡œ ì¡°íšŒ)
	- â³ Step 5: ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
	- â³ Step 6: txn_events.price_trend ì»¬ëŸ¼ ì œê±° (ì„ íƒ)

	**ì˜ˆìƒ ì„±ëŠ¥ ê°œì„ **:
	| ì‘ì—… | í˜„ì¬ | ê°œì„  í›„ | ê°œì„ ìœ¨ |
	|------|------|---------|--------|
	| GET /events (100í–‰) | 2-5ì´ˆ | 0.2-0.4ì´ˆ | **85-92%** |
	| DB ì¿¼ë¦¬ | ~500ms | ~100ms | 80% |
	| Python ì²˜ë¦¬ | ~1500ms | ~50ms | 97% |

	**ì°¸ì¡°**:
	- ì„¤ê³„ ë¬¸ì„œ: ë³¸ ëŒ€í™” ë¡œê·¸
	- íë¦„ë„: `2_FLOW.md#I-43`
	- ìƒì„¸ êµ¬í˜„: `3_DETAIL.md#I-43`
	- ì—”ë“œí¬ì¸íŠ¸: `0_endpointFlow/GET_dashboard_events.md`, `POST_backfillEventsTable.md`

---

## ğŸ“ˆ í†µê³„

### ìƒíƒœë³„ í˜„í™©
- âœ… **ì™„ë£Œ**: 37ê°œ (86.0%)
- ğŸ”„ **ì§„í–‰ì¤‘**: 1ê°œ (2.3%) - I-43
- ğŸ”„ **DEPRECATED**: 3ê°œ (7.0%) - I-36, I-38, I-40 (I-41ë¡œ ëŒ€ì²´ë¨)
- â¸ï¸ **ë³´ë¥˜**: 2ê°œ (4.7%) - I-04, I-14

> **ì „ì²´ ì´ìŠˆ**: 43ê°œ (I-01 ~ I-43)

### ì¼ìë³„ ì´ìŠˆ ì²˜ë¦¬
- **2025-12-23**: I-01 ~ I-09 (9ê°œ ì´ìŠˆ ì²˜ë¦¬)
- **2025-12-24**: I-10 ~ I-17 (8ê°œ ì´ìŠˆ ì²˜ë¦¬)
- **2025-12-25**: I-18 ~ I-24 (7ê°œ ì´ìŠˆ ì²˜ë¦¬)
- **2025-12-27**: I-25 ~ I-28 (4ê°œ ì´ìŠˆ ì‹ë³„ ë° ì™„ë£Œ)
- **2025-12-30**: I-29 (ì‹ë³„)
- **2025-12-31**: I-29 ~ I-37 (9ê°œ ì´ìŠˆ í•´ê²° - ë°±ì—”ë“œ 6ê±´, UI/UX 3ê±´)
- **2026-01-01**: I-38 (calcFairValue ê¸°ë³¸ê°’ ë³€ê²½ - í˜„ì¬ deprecated)
- **2026-01-02**: I-39 ~ I-42 (JSONB íŒŒì‹±, priceQuantitative ë©”íŠ¸ë¦­ êµ¬í˜„, schema mapping ê°œì„ )
- **2026-01-05**: I-43 (Dashboard Events ë¡œë”© ì„±ëŠ¥ ê°œì„  - txn_price_trend í…Œì´ë¸” ë¶„ë¦¬ ì„¤ê³„)

### íê¸° ì´ìŠˆ (Deprecated)
- **I-36**: calcFairValue íŒŒë¼ë¯¸í„° â†’ I-41 priceQuantitative ë©”íŠ¸ë¦­ìœ¼ë¡œ ëŒ€ì²´
- **I-38**: calcFairValue ê¸°ë³¸ê°’ â†’ I-41 ë©”íŠ¸ë¦­ ìë™ ê³„ì‚°ìœ¼ë¡œ ëŒ€ì²´
- **I-40**: Peer tickers ë¡œê¹… â†’ I-41 ì œí•œì‚¬í•­ìœ¼ë¡œ í†µí•©

---

*ìµœì¢… ì—…ë°ì´íŠ¸: 2026-01-05 KST (I-43 ì„¤ê³„ ì™„ë£Œ - Dashboard Events ë¡œë”© ì„±ëŠ¥ ê°œì„ , txn_price_trend í…Œì´ë¸” ë¶„ë¦¬)*
*ì´ì „ ì—…ë°ì´íŠ¸: I-42 ì™„ë£Œ - fmp-stock-peers schema mapping ê°œì„ , priceQuantitative DB ì €ì¥ ìˆ˜ì •*
*ì„¤ê³„ ë¬¸ì„œ: backend/DESIGN_priceQuantitative_metric.md*
*ì´ìŠˆ ë¶„ì„: history/ISSUE_priceQuantitative_MISSING.md*
