# Railway deployment configuration for monorepo
# Uses Nixpacks builder to install backend dependencies and start FastAPI

[build]
builder = "NIXPACKS"
buildCommand = "apt-get update && apt-get install -y python3 python3-pip && cd backend && python3 -m pip install -r requirements.txt"

[deploy]
# Health endpoint exposed by backend
healthcheckPath = "/health"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
# Use the helper script so Railpack/Nixpacks can autodetect the start command
startCommand = "./start.sh"