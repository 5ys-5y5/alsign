범용 디자인 시스템 사양

- 디자인 토큰(반드시 먼저 정의)
    - Color(CSS 변수)
        - -ink: #000000 (헤딩/프라이머리)
        - -text: #374151 (본문)
        - -text-dim: #9CA3AF (보조/비활성)
        - -surface: #F9FAFB (카드/호버)
        - -border: #E5E7EB (구분선)
        - 악센트: --accent-primary #3B82F6, --accent-success #10B981, --accent-warning #F59E0B, --accent-danger #EF4444
    - Spacing(8px 그리드)
        - 기본 단위: 8px. gap/padding/margin은 8·12·16·24·32px만 사용
        - 자주 쓰는 값: gap-2(8), gap-3(12), gap-4(16), gap-6(24), gap-8(32), p-6(24), px-4(16), py-8(32), md:py-12(48)
    - Typography
        - h1: "text-3xl font-semibold text-[--ink]"
        - h2: "text-2xl font-bold text-[--ink]"
        - h3: "text-xl font-semibold text-[--ink]"
        - body: "text-sm text-[--text]"
        - caption: "text-xs text-[--text-dim]"
        - 숫자강조: "text-3xl font-semibold text-[--ink]"(카드 숫자), "text-lg font-semibold text-[--ink]"(테이블 강조)
    - Radius/Shadow
        - radius: rounded-lg(8), rounded-xl(12), rounded-2xl(16), rounded-full
        - shadow: 기본 없음, 호버 시 "hover:shadow-lg transition-shadow duration-200"
    - Icon sizes
        - xs 12(w-3 h-3), sm 14(w-3.5 h-3.5), md 16(w-4 h-4), lg 20(w-5 h-5), xl 24(w-6 h-6)
- 레이아웃/컨테이너
    - 페이지 래퍼: "min-h-screen bg-white"
    - 컨테이너 폭/패딩
        - narrow: "max-w-4xl mx-auto px-4 md:px-6 py-8 md:py-12"
        - default: "max-w-7xl mx-auto px-4 md:px-6 py-8 md:py-12"
        - wide(데이터 테이블): "max-w-[1600px] mx-auto px-4 md:px-6 py-8 md:py-12"
    - 상단 네비게이션(공통 느낌)
        - 바: "sticky top-0 z-50 bg-white border-b border-[--border] h-16"
        - 좌측(로고+메뉴) "flex items-center gap-8", 메뉴 아이템 기본 "text-sm text-[--text-dim] hover:text-[--ink] transition-colors", 활성은 "text-[--ink] font-medium"
        - 우측(상태/버튼) "flex items-center gap-3"
        - 모바일: "md:hidden" 햄버거, 드롭다운 "px-4 py-3 space-y-3 border-t border-[--border]"
- 공통 컴포넌트 규격
    - Button
        - Primary: "bg-[--ink] text-white hover:bg-gray-800 rounded-lg transition-colors"
        - Outline: "border border-[--border] text-[--text] hover:bg-[--surface] rounded-lg transition-colors"
        - Ghost: "text-[--text-dim] hover:text-[--ink] hover:bg-[--surface] rounded-lg transition-colors"
        - Sizes: sm "h-8 px-3 text-sm", md "h-10 px-4 text-sm", lg "h-12 px-6 text-base"
        - Disabled: "opacity-50 cursor-not-allowed"
    - Input
        - 기본: "h-10 px-3 text-sm border border-[--border] rounded-lg focus:ring-2 focus:ring-[--ink] focus:border-transparent transition-all"
        - 에러: border-red-500 + focus:ring-red-500
        - 소형(필터/팝오버): "h-8 px-3 text-sm ..."
    - Card
        - 기본: "border border-[--border] rounded-xl p-6 bg-white"
        - 인터랙티브: 위 + "hover:shadow-lg transition-all duration-200"
    - Badge/Label
        - 상태: "px-2 py-0.5 text-xs rounded-full bg-gray-100 text-gray-700" (success/warning/error/info는 색만 교체)
        - 강조(검정): "px-3 py-1 text-xs font-medium rounded-full bg-[--ink] text-white"
    - Alert
        - 정보: "border border-[--border] bg-[--surface] rounded-lg p-4 flex items-start gap-3"
        - 성공/경고/에러: 테마색의 연한 배경/테두리 사용
- 스크롤/오버플로우
    - 가로 스크롤 컨테이너: "overflow-x-auto"
    - 세로 제한 스크롤: "max-h-[400px] overflow-y-auto"
    - 팝오버/메뉴 내부 스크롤: 컨텐츠에 "max-h-[300px] overflow-y-auto"
- 표 시스템(전 제품 공통 규격) — SignalAI 느낌의 핵심
    - 외곽: "border border-[--border] rounded-xl overflow-hidden bg-white"
    - 내부 래퍼: "overflow-x-auto"
    - 테이블: "w-full border-collapse"
    - 헤더 thead: "sticky top-0 z-10 bg-[--surface]"
        - 각 th: "bg-slate-100/80 backdrop-blur text-[--text-dim] px-4 py-3 text-xs font-medium text-left uppercase tracking-wider whitespace-nowrap"
        - 헤더 바로 아래 진한 구분선: thead 끝에 별도 tr 추가, single th에 "p-0", 내부에 위치
    - 바디 tbody: "divide-y divide-[--border]"
    - 행 hover: "hover:bg-[--surface] transition-colors"
    - 셀: "px-4 py-3 text-sm text-[--text] whitespace-nowrap"
    - 잠금 표현(선택 기능): 행에 "opacity-60", 잠긴 셀은 내용 대신 락 아이콘(크기 w-3 h-3, 색 [--text-dim])로 가운데 정렬. 항상 노출되는 예외 컬럼은 "ticker, recommended_buy_date".
- Signals 표: 컬럼·컬럼선택·정렬·필터 완전 명세
    - 컬럼 정의 스키마(객체 배열)
        - 각 컬럼: { key: string, label: string, width: number, isDefault: boolean }
        - 기본 세트 예: ticker(100,true), recommended_buy_date(110,true), recommended_buy_price(100,true), exp_price(100,true), R(90,true), gap_ratio(90,true), resolution_rate(90,true), reliability(90,true), event_type(120,true), side(90,true)
    - 표시 컬럼 산출 규칙
        - availableColumns: 서버/설정 소스가 있으면 그것, 없으면 기본 세트
        - selectedColumns: 사용자 설정 있으면 교차검증 후 적용, 없으면 availableColumns 중 isDefault=true만 추림
        - 사용자 설정 저장: 백엔드가 없을 경우 localStorage("selected_columns")로 저장/로드(문자열 배열), 백엔드가 있으면 사용자 프로필 필드 사용
    - 컬럼 선택 UI
        - 트리거 버튼: 상단 오른쪽 "Dropdown/Popover Trigger" 버튼, 스타일 "variant=outline size=sm gap-2", 아이콘 설정 아이콘(md 16)
        - 컨텐츠: 체크박스 리스트(세로), 각 항목 클릭 시 토글, 현재 선택 표시. 많은 경우 "max-h-[300px] overflow-y-auto"
    - 정렬 동작(토글 3단계)
        - 각 th 우측에 정렬 버튼(아이콘 크기 14: w-3.5 h-3.5, 버튼 패딩 p-0.5)
        - 클릭 시 state 전이: null → asc → desc → null
        - 비교 규칙
            - 날짜: Date(a)-Date(b)
            - 문자열: localeCompare
            - 숫자: a-b
            - null/undefined는 항상 끝에 배치(asc일 때 뒤, desc일 때 앞)
    - 필터 동작(컬럼별 팝오버)
        - 트리거: th 우측 필터 아이콘(14px). 활성시 색상 "text-[--ink]", 비활성 "text-[--text-dim]"
        - 컨텐츠 공통 레이아웃: "w-64 space-y-3" + 상단에 제목/초기화 버튼(h-6 px-2 text-xs)
        - 타입 판정 규칙: getColumnType(key)
            - date: ["recommended_buy_date","recommended_sell_date"]
            - number: ["recommended_buy_price","recommended_sell_price","exp_price","R","gap_ratio","resolution_rate","reliability"]
            - enum: ["event_type","side"]
            - string: 나머지
        - 입력 위젯/알고리즘
            - string: Input(h-8) 값 포함(대소문자 무시) 매칭
            - date: Input(type=date, h-8), YYYY-MM-DD 포맷으로 날짜 문자열 포함 매칭
            - number: 2-필드 "최소/최대", 내부 표현은 "min-max" 문자열. 파싱:
                - minStr, maxStr = split('-'); min=빈→-Infinity, max=빈→Infinity; 숫자 변환 실패 시 제외
            - enum: 옵션 목록에서 단일 선택. 옵션:
                - event_type: 기본 ['earnings','guidance','product','regulatory','investor_day','mna','pdufa','contract','product_launch','market_shift','other'] (제품별 필요 시 치환 가능하되 “소문자, 생략 없는 라벨” 원칙 유지)
                - side: ['Long','Short']
        - 필터 값 저장: filters 딕셔너리 { [columnKey]: value }, 빈 값 제거 시 해당 키 삭제
        - 필터 적용 순서: filters의 키를 순회하며 누적 AND 필터링
    - 셀 렌더링 규칙(핵심 컬럼 포맷)
        - 날짜: 'M/d (E)' 로컬라이즈 표시(예: 12/11 (수))
        - 가격: "₩" + 천단위 콤마. 값 없으면 "-"
        - 퍼센트:
            - R: 소수점 2자리, 굵게, "((value||0)*100).toFixed(2)+'%'", 색은 기본
            - gap_ratio, resolution_rate, reliability: 정수 "%", "((value||0)*100).toFixed(0)+'%'"
        - side: 배지 "px-2 py-0.5 text-xs rounded-full", Long=파랑(bg-blue-100 text-blue-700), Short=빨강(bg-red-100 text-red-700), 기타=회색
        - event_type: 칩 "text-xs px-2 py-1 rounded-full bg-[--surface] text-[--text]"
        - 배열(risks, source): "text-xs text-[--text-dim]" 로 "n개 항목/리스크/출처"
        - 긴 텍스트(thesis 등): "text-xs text-[--text] truncate max-w-[200px]" + title 속성 전체값
        - null/undefined: "-" 표시(색 [--text-dim])
    - 헤더 우측 컨트롤 묶음(정렬+필터)
        - 래퍼: "flex items-center gap-1"
        - 각 버튼: "p-0.5 hover:bg-[--surface] rounded transition-colors"
    - 반응형/스크롤
        - 반드시 테이블 부모에 "overflow-x-auto"
        - thead sticky 유지
    - 열 너비
        - 각 컬럼 width 수치(px)를 style에 직접 부여; 긴 값은 truncate로 처리
- 데이터/상태 표현 규칙
    - 숫자/통화: 금액은 로컬 통화 기호·천단위 콤마, 퍼센트는 지정 소수점
    - 날짜: 내부 YYYY-MM-DD, 표시 'M/d (E)' 또는 'yyyy-MM-dd' 문맥별 고정
    - 상태 배지: 성공/경고/에러/중립 4계열만 사용, 채도 과하지 않게(100 배경, 700 텍스트)
- 접근성/키보드
    - 포커스 링: 포커스 가능한 모든 요소에 "focus:ring-2 focus:ring-[--ink] focus:outline-none"
    - 정렬/필터 버튼 aria-label 제공(예: "정렬", "필터")
    - 팝오버 내부 탭 이동 가능, ESC로 닫힘
- 저장소/퍼시스턴스 가이드
    - 컬럼 선택: 가능하면 사용자별 서버 저장. 서버 미구현 시 localStorage 키 "selected_columns" 문자열 배열로 저장/복원
    - 필터/정렬: 세션 단위 유지 필요 시 sessionStorage 권장("signals_filters","signals_sort")
- 구현 체크리스트(다른 제품에 이식 시)
    - 전역 토큰(CSS 변수) 지정 완료 여부
    - 컨테이너 폭/패딩과 네비게이션 바 스타일 준수
    - 버튼/인풋/카드/배지/알림 변형과 상태 클래스 동일 적용
    - 표 컨테이너/thead sticky/검정 구분선/행 hover/셀 패딩 정확도
    - 컬럼 스키마·선택 UI·정렬 토글·필터 타입별 알고리즘 동일 구현
    - 문자열/숫자/날짜/enum 필터 파싱 규칙 준수
    - 아이콘 크기·간격(정렬/필터 14px, 버튼 16px) 일치
    - 모바일 가로 스크롤과 헤더 고정 동작 검증
    - 사용자 선택 컬럼 퍼시스턴스 동작 확인
- Signal 표 핵심 사양 요약(초정밀)
    - 헤더 th: "px-4 py-3 text-xs uppercase tracking-wider bg-slate-100/80 backdrop-blur text-[--text-dim]"
    - 헤더 하단 검정 라인: thead 뒤 추가 tr에 "h-px bg-black"
    - 셀: "px-4 py-3 text-sm text-[--text] whitespace-nowrap"
    - 정렬 버튼: 아이콘 14px, 버튼 p-0.5, 토글 순서 null→asc→desc→null
    - 필터 팝오버: 폭 256px(w-64), 내부 "space-y-3", 초기화 버튼 "h-6 px-2 text-xs"
    - 기본 표시 컬럼: 위 열거 10개, 추가 컬럼도 동일 규칙로 확장
    - 잠금 표현(옵션): 행 opacity-60, 셀에는 락 아이콘(12px), "ticker, recommended_buy_date"만 평문
- 적용 예시(의사 코드 개요, 프레임워크 무관)
    - columns: 배열 스키마로 정의
    - availableColumns ← 서버 또는 기본
    - selectedColumns ← 저장소 로드 → 교차검증 → 기본 보정
    - displayColumns ← availableColumns.filter(key∈selectedColumns)
    - sortConfig { key|null, direction:null|'asc'|'desc' }
    - filters { [key]: string|enum|'min-max'|dateString }
    - renderHeader(col): 라벨 + [정렬버튼 + 필터버튼]
    - renderCell(col, value): 상기 포맷 규칙
    - applyFilters(signals): 타입별 알고리즘으로 누적 AND
    - applySort(signals, sortConfig): 타입별 비교 + null tail
    - persist on change: selectedColumns 저장, 필요 시 filters/sort 저장